

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Commented Examples &mdash; The MFEM MGIS project  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Developer guide" href="../developer_guide/developer_guide.html" />
    <link rel="prev" title="Glossary Of Parameters" href="../user_guide/glossary.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            The MFEM MGIS project
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation_guide/installation_guide.html">Installation guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/user_guide.html">User guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Commented Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tensiletest">TensileTest</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#description">Description:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#problem-solved">Problem Solved</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-this-simulation">Run This Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#available-options">Available options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ssna303-example-2d-and-3d">Ssna303 Example (2D and 3D)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#satoh">Satoh</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Description:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Problem solved</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-the-simulation">Run the simulation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#representative-volume-element-with-elastic-inclusions">Representative Volume Element with Elastic inclusions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#build-the-mesh">Build the mesh</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Run the Simulation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">Available options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#representative-volume-element-of-combustible-mixed-oxides-for-nuclear-applications">Representative Volume Element of Combustible Mixed Oxides for Nuclear Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">Problem solved</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-run-the-simulation-rve-mox">How to run the simulation “RVE MOX”</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Build the mesh</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">Run the simulation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#run-a-minimal-version-of-the-simulation">Run a minimal version of the simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Available options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parallel-computing-mode">Parallel computing mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#post-processing-of-simulation-data">Post-processing of simulation data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#extract-simulation-data-from-mmm">Extract simulation data from MMM</a></li>
<li class="toctree-l4"><a class="reference internal" href="#display-results-with-gnuplot">Display results with gnuplot</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/developer_guide.html">Developer guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The MFEM MGIS project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Commented Examples</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/commented_examples/commented_examples.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="commented-examples">
<h1>Commented Examples<a class="headerlink" href="#commented-examples" title="Link to this heading"></a></h1>
<p>All the examples presented in this section can be found in the git repositories: <a class="reference external" href="https://github.com/latug0/mfem-mgis-examples">https://github.com/latug0/mfem-mgis-examples</a> and <a class="reference external" href="https://github.com/rprat-pro/mm-opera-hpc">https://github.com/rprat-pro/mm-opera-hpc</a> (developed as part of operaHPC project).</p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#tensiletest" id="id10">TensileTest</a></p></li>
<li><p><a class="reference internal" href="#ssna303-example-2d-and-3d" id="id11">Ssna303 Example (2D and 3D)</a></p></li>
<li><p><a class="reference internal" href="#satoh" id="id12">Satoh</a></p></li>
<li><p><a class="reference internal" href="#representative-volume-element-with-elastic-inclusions" id="id13">Representative Volume Element with Elastic inclusions</a></p></li>
<li><p><a class="reference internal" href="#representative-volume-element-of-combustible-mixed-oxides-for-nuclear-applications" id="id14">Representative Volume Element of Combustible Mixed Oxides for Nuclear Applications</a></p></li>
</ul>
</nav>
<section id="tensiletest">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">TensileTest</a><a class="headerlink" href="#tensiletest" title="Link to this heading"></a></h2>
<p>website : <a class="reference external" href="https://github.com/latug0/mfem-mgis-examples/tree/master/ex1">https://github.com/latug0/mfem-mgis-examples/tree/master/ex1</a></p>
<section id="description">
<h3>Description:<a class="headerlink" href="#description" title="Link to this heading"></a></h3>
<figure class="align-default">
<img alt="Illustration of the start of the TensileTest simulation." src="../_images/ex1Start.png" />
</figure>
<figure class="align-default">
<img alt="Illustration of the start of the TensileTest simulation." src="../_images/ex1End.png" />
</figure>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Complet the description</p>
</div>
</section>
<section id="problem-solved">
<h3>Problem Solved<a class="headerlink" href="#problem-solved" title="Link to this heading"></a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Export the internal value name plasticity strain

Solver : Conjugate Gradient (default)
Preconditioner : Depends on the solver

The default is plasticity, behavior law parameter are defined into the lib loaded.

Element:
- Family H1
- Order 1
</pre></div>
</div>
</section>
<section id="run-this-simulation">
<h3>Run This Simulation<a class="headerlink" href="#run-this-simulation" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpirun<span class="w"> </span>-n<span class="w"> </span><span class="m">10</span><span class="w"> </span>./UniaxialTensileTestEx<span class="w"> </span>-m<span class="w"> </span>cube.mesh<span class="w"> </span>-l<span class="w">  </span>src/libBehaviour.so<span class="w"> </span>-b<span class="w"> </span>Plasticity<span class="w"> </span>-r<span class="w"> </span>Plasticity.ref<span class="w"> </span>-ls<span class="w"> </span><span class="m">1</span><span class="w"> </span>-p<span class="w"> </span><span class="m">1</span><span class="w"> </span>-v<span class="w"> </span>EquivalentPlasticStrain
</pre></div>
</div>
</section>
<section id="available-options">
<h3>Available options<a class="headerlink" href="#available-options" title="Link to this heading"></a></h3>
<p>To customize the simulation, several options are available, as detailed
below.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command line</p></th>
<th class="head"><p>Descritption</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>–mesh or -m</p></td>
<td><p>specify the mesh “.msh” used (default =
inclusion.msh)</p></td>
</tr>
<tr class="row-odd"><td><p>–refinement or -r</p></td>
<td><p>The reference file
(default = Plasticity.ref)</p></td>
</tr>
<tr class="row-even"><td><p>–behaviour or -b</p></td>
<td><p>Name of the behaviour law
(default = Plasticity)</p></td>
</tr>
<tr class="row-odd"><td><p>–internal-state-variable or -v</p></td>
<td><p>Internal variable name to be post-processed
(default = EquivalentPlasticStrain)</p></td>
</tr>
<tr class="row-even"><td><p>–library or -l</p></td>
<td><p>Material library
(default = src/libBehaviour.so)</p></td>
</tr>
<tr class="row-odd"><td><p>–linearsolver or -ls</p></td>
<td><p>identifier of the linear solver: 0 -&gt; CG,
1 -&gt; GMRES, 2 -&gt; UMFPack (serial),
3-&gt; MUMPS(serial), 2 -&gt; HypreFGMRES (//),
3 -&gt; HyprePCG (//), 4 -&gt; HypreGMRES (//).</p></td>
</tr>
<tr class="row-even"><td><p>–order or -o</p></td>
<td><p>Finite element order (polynomial degree)
(default = 2)</p></td>
</tr>
<tr class="row-odd"><td><p>–parallel or -p</p></td>
<td><p>run parallel execution
(default = 0, serial)</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="ssna303-example-2d-and-3d">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Ssna303 Example (2D and 3D)</a><a class="headerlink" href="#ssna303-example-2d-and-3d" title="Link to this heading"></a></h2>
<p>This tutorial deals with a 2D (plane strain) tensile test (ex2) and 3D (ex4) on a notched beam modeled by finite-strain plastic behavior. See the tutorial section.</p>
<ul class="simple">
<li><p>website 2D example: <a class="reference external" href="https://github.com/latug0/mfem-mgis-examples/tree/master/ex2">https://github.com/latug0/mfem-mgis-examples/tree/master/ex2</a></p></li>
<li><p>website 3D example : <a class="reference external" href="https://github.com/latug0/mfem-mgis-examples/tree/master/ex4">https://github.com/latug0/mfem-mgis-examples/tree/master/ex4</a></p></li>
</ul>
<figure class="align-default">
<img alt="Illustration of the start of the ssna303 simulation." src="../_images/ssna303Start.png" />
</figure>
<figure class="align-default">
<img alt="Illustration of the start of the ssna303 simulation." src="../_images/ssna303End.png" />
</figure>
</section>
<section id="satoh">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Satoh</a><a class="headerlink" href="#satoh" title="Link to this heading"></a></h2>
<p>website: <a class="reference external" href="https://github.com/latug0/mfem-mgis-examples/tree/master/ex5">https://github.com/latug0/mfem-mgis-examples/tree/master/ex5</a></p>
<section id="id1">
<h3>Description:<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>Modelling plate of length 1 in plane strain clamped on the left and right boundaries and submitted to a parabolic thermal gradient along the x-axis. (source code 5)</p>
<figure class="align-default">
<img alt="Illustration of the displacement of the plate." src="../_images/SatohTest.png" />
</figure>
</section>
<section id="id2">
<h3>Problem solved<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>This test models a 2D plate of lenght 1 in plane strain clamped on the left
and right boundaries and submitted to a parabolic thermal gradient along the
x-axis:

- the temperature profile is minimal on the left and right boundaries
- the temperature profile is maximal for x = 0.5

This example shows how to define an external state variable using an
analytical profile.

Solver : UMFPackSolver
Preconditioner : None

Elastic behavior law parameters :
[ parameters       , material ]
[ Young Modulus    , 150e9    ];
[ Poisson Ratio    , 0.3      ];
[ Temperature      , 293.15   ];

Element:
- Family H1
- Order 2
</pre></div>
</div>
</section>
<section id="run-the-simulation">
<h3>Run the simulation<a class="headerlink" href="#run-the-simulation" title="Link to this heading"></a></h3>
<p>Paramerters are hardcode into this example.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./SatohTest
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to run this example in parallel, you’ll have to change the solver too.</p>
</div>
</section>
</section>
<section id="representative-volume-element-with-elastic-inclusions">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Representative Volume Element with Elastic inclusions</a><a class="headerlink" href="#representative-volume-element-with-elastic-inclusions" title="Link to this heading"></a></h2>
<p>Simulation of a Representative Volume Element (RVE) with a non-linear elastic behavior law. A geometry mesh is provided : “inclusions_49.geo”. The mesh can be generated using the following command: gmsh -3 inclusions_49.geo. By modifying the parameters within the .geo file, such as the number of spheres and the size of the element mesh, you can control and customize the simulation accordingly. (code source: ex6)</p>
<figure class="align-default">
<img alt="Slice of a RVE with 49 spheres." src="../_images/ex6half.png" />
</figure>
<figure class="align-default">
<img alt="RVE with 49 spheres." src="../_images/ex6full.png" />
</figure>
<section id="build-the-mesh">
<h3>Build the mesh<a class="headerlink" href="#build-the-mesh" title="Link to this heading"></a></h3>
<p>Use GMSH to mesh the geometry. Files <code class="docutils literal notranslate"><span class="pre">.geo</span></code> is in the depository <code class="docutils literal notranslate"><span class="pre">ex6</span></code>. Command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># generate the .msh file with GMSH</span>
gmsh<span class="w"> </span>-3<span class="w"> </span>inclusions_49.geo
</pre></div>
</div>
</section>
<section id="id3">
<h3>Run the Simulation<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpirun<span class="w"> </span>-n<span class="w"> </span><span class="m">12</span><span class="w"> </span>./rve<span class="w"> </span>--mesh<span class="w"> </span>inclusions_49.msh<span class="w"> </span>--verbosity-level<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
<section id="id4">
<h4>Available options<a class="headerlink" href="#id4" title="Link to this heading"></a></h4>
<p>To customize the simulation, several options are available, as detailed
below.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command line</p></th>
<th class="head"><p>Descritption</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>–mesh or -m</p></td>
<td><p>specify the mesh “.msh” used (default =
inclusion.msh)</p></td>
</tr>
<tr class="row-odd"><td><p>–refinement or -r</p></td>
<td><p>refinement level of the mesh (default = 0)</p></td>
</tr>
<tr class="row-even"><td><p>–order or -o</p></td>
<td><p>Finite element order (polynomial degree)
(default = 2)</p></td>
</tr>
<tr class="row-odd"><td><p>–verbosity-level or -v</p></td>
<td><p>choose the verbosity level (default = 0)</p></td>
</tr>
<tr class="row-even"><td><p>–post-processing or -p</p></td>
<td><p>run post processing step (default = 1)</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="representative-volume-element-of-combustible-mixed-oxides-for-nuclear-applications">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Representative Volume Element of Combustible Mixed Oxides for Nuclear Applications</a><a class="headerlink" href="#representative-volume-element-of-combustible-mixed-oxides-for-nuclear-applications" title="Link to this heading"></a></h2>
<p>This simulation represents an RVE of MOx (Mixed Oxide) material under
uniform macroscopic deformation. The aim of this simulation is to
reproduce and compare the results obtained by (Fauque et al., 2021;
Masson et al., 2020) who used an FFT method. (source code: ex7)</p>
<section id="id5">
<h3>Problem solved<a class="headerlink" href="#id5" title="Link to this heading"></a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Problem : RVE MOx 2 phases with elasto-viscoplastic behavior laws

Parameters :

start time = 0
end time = 5s
number of time step = 40

Imposed strain tensor :
        [ -a/2 ,   0  ,  0 ]
eps  =  [   0  , -a/2 ,  0 ]
        [   0  ,   0  ,  a ]
with a = 0.012

Solver : HyprePCG
Preconditioner : HypreBoomerAMG

Moduli and Norton behavior law parameters :
[ parameters       , inclusions   , matrix ]
[ Young Modulus    , 8.182e9  , 2*8.182e9  ];
[ Poisson Ratio    , 0.364    , 0.364      ];
[ Stress Threshold , 100.0e6  , 100.0e12   ];
[ Norton Exponent  , 3.333333 , 3.333333   ];
[ Temperature      , 293.15   , 293.15     ];

Element :
- Familly H1
- Order 2
</pre></div>
</div>
<figure class="align-default" id="id9">
<img alt="Illustration of a RVE with 634 spheres after 5 seconds." src="../_images/mox-order2.png" />
<figcaption>
<p><span class="caption-text">Illustration of a RVE with 634 spheres after 5 seconds.</span><a class="headerlink" href="#id9" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="how-to-run-the-simulation-rve-mox">
<h3>How to run the simulation “RVE MOX”<a class="headerlink" href="#how-to-run-the-simulation-rve-mox" title="Link to this heading"></a></h3>
</section>
<section id="id6">
<h3>Build the mesh<a class="headerlink" href="#id6" title="Link to this heading"></a></h3>
<p>The mesh is generated with MEROPE and GMSH through the following steps:</p>
<ul class="simple">
<li><p>First step, use MEROPE to generate a <code class="docutils literal notranslate"><span class="pre">.geo</span></code> file using the RSA
algorithm. Scripts are in directory <code class="docutils literal notranslate"><span class="pre">script_merope</span></code>. Command line:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># generate .geo file with MEROPE</span>
python3<span class="w"> </span>script_17percent_minimal.py
</pre></div>
</div>
<ul class="simple">
<li><p>Second step, use GMSH to mesh the geometry. Files <code class="docutils literal notranslate"><span class="pre">.geo</span></code> are in the
directory <code class="docutils literal notranslate"><span class="pre">file_geo</span></code>. Command line:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># generate the .msh file with GMSH</span>
gmsh<span class="w"> </span>-3<span class="w"> </span>OneSphere.geo
</pre></div>
</div>
</section>
<section id="id7">
<h3>Run the simulation<a class="headerlink" href="#id7" title="Link to this heading"></a></h3>
<section id="run-a-minimal-version-of-the-simulation">
<h4>Run a minimal version of the simulation<a class="headerlink" href="#run-a-minimal-version-of-the-simulation" title="Link to this heading"></a></h4>
<p>In order to run the simulation in sequential computing mode, use the
command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># run the simulation by specifying the mesh with --mesh option</span>
./mox2<span class="w"> </span>--mesh<span class="w"> </span>OneSphere.msh
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">MPI</span></code> + <code class="docutils literal notranslate"><span class="pre">Petsc</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpirun<span class="w"> </span>-n<span class="w"> </span><span class="m">2</span><span class="w"> </span>mox2<span class="w"> </span>-m<span class="w"> </span>mesh/OneSphere.msh<span class="w"> </span>-o<span class="w"> </span><span class="m">1</span><span class="w"> </span>--use-petsc<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--petsc-configuration-file<span class="w"> </span>petscrc
</pre></div>
</div>
</section>
<section id="id8">
<h4>Available options<a class="headerlink" href="#id8" title="Link to this heading"></a></h4>
<p>To customize the simulation, several options are available, as detailed
below.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Command line</p></th>
<th class="head"><p>Descritption</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>–mesh or -m</p></td>
<td><p>Specify the mesh “.msh” used (default =
inclusion.msh)</p></td>
</tr>
<tr class="row-odd"><td><p>–refinement or -r</p></td>
<td><p>Refinement level of the mesh (default = 0)</p></td>
</tr>
<tr class="row-even"><td><p>–order or -o</p></td>
<td><p>Finite element order (polynomial degree)
(default = 2)</p></td>
</tr>
<tr class="row-odd"><td><p>–verbosity-level or -v</p></td>
<td><p>Choose the verbosity level (default = 0)</p></td>
</tr>
<tr class="row-even"><td><p>–post-processing or -p</p></td>
<td><p>Run post processing step (default = 1)</p></td>
</tr>
<tr class="row-odd"><td><p>–use-petsc</p></td>
<td><p>Activate petsc if petsc is availabled</p></td>
</tr>
<tr class="row-even"><td><p>–petsc-configuration-file</p></td>
<td><p>Name of the Petsc source file</p></td>
</tr>
</tbody>
</table>
<p>Example of customized simulation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># run the simulation in sequential computing mode with various options</span>
./mox2<span class="w"> </span>-r<span class="w"> </span><span class="m">2</span><span class="w"> </span>-o<span class="w"> </span><span class="m">3</span><span class="w"> </span>--mesh<span class="w"> </span>OneSphere.msh
</pre></div>
</div>
</section>
<section id="parallel-computing-mode">
<h4>Parallel computing mode<a class="headerlink" href="#parallel-computing-mode" title="Link to this heading"></a></h4>
<p>The simulation can be run in parallel computing mode by using the
command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># run the simulation by specifying the mesh with --mesh option</span>
mpirun<span class="w"> </span>-n<span class="w"> </span><span class="m">12</span><span class="w"> </span>./mox2<span class="w"> </span>--mesh<span class="w"> </span>634Spheres.msh
</pre></div>
</div>
<p>Simulation can be run on supercomputers. The command depends on the
server manager. For example, on Topaze, a CCRT-hosted supercomputer
co-designed by Atos and CEA, the commands are :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ccc_mprun<span class="w"> </span>-n<span class="w"> </span><span class="m">8</span><span class="w"> </span>-c<span class="w"> </span><span class="m">1</span><span class="w"> </span>-p<span class="w"> </span>milan<span class="w"> </span>./mox2<span class="w"> </span>-r<span class="w"> </span><span class="m">0</span><span class="w"> </span>-o<span class="w"> </span><span class="m">3</span><span class="w"> </span>--mesh<span class="w"> </span>OneSphere.msh
ccc_mprun<span class="w"> </span>-n<span class="w"> </span><span class="m">2048</span><span class="w"> </span>-c<span class="w"> </span><span class="m">1</span><span class="w"> </span>-p<span class="w"> </span>milan<span class="w"> </span>./mox2<span class="w"> </span>-r<span class="w"> </span><span class="m">2</span><span class="w"> </span>-o<span class="w"> </span><span class="m">1</span><span class="w"> </span>--mesh<span class="w"> </span>634Sphere.msh
</pre></div>
</div>
</section>
</section>
<section id="post-processing-of-simulation-data">
<h3>Post-processing of simulation data<a class="headerlink" href="#post-processing-of-simulation-data" title="Link to this heading"></a></h3>
<p>The aim of this exercise is to reproduce the simulation results of
(Fauque et al., 2021; Masson et al., 2020). To this end, the average
stresses in the z-axis direction (SZZ) will be analyzed. The reference
values, obtained by (Fauque et al., 2021; Masson et al., 2020), can be
found in the directory <code class="docutils literal notranslate"><span class="pre">results</span></code>, file res-fft.txt (Average stress
versus time).</p>
<section id="extract-simulation-data-from-mmm">
<h4>Extract simulation data from MMM<a class="headerlink" href="#extract-simulation-data-from-mmm" title="Link to this heading"></a></h4>
<p>The avgStress post-processing file generated by MMM contains average
stress values as a function of time, by material phase. MMM simulation
data are available: <code class="docutils literal notranslate"><span class="pre">results/res-mfem-mgis-onesphere-o3.txt</span></code> and
<code class="docutils literal notranslate"><span class="pre">results/res-mfem-mgis-634sphere-o2.txt</span></code>.</p>
<p>For example, the average stress SZZ over the RVE (composed of 83% matrix
and 17% inclusion) can be calculated with the awk command under unix:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>awk<span class="w"> </span><span class="s1">&#39;{if(NR&gt;13) print $1 &quot; &quot; 0.83*$4+0.17*$10}&#39;</span><span class="w"> </span>avgStress<span class="w"> </span>&gt;<span class="w"> </span>res-mfem-mgis.txt
</pre></div>
</div>
</section>
<section id="display-results-with-gnuplot">
<h4>Display results with gnuplot<a class="headerlink" href="#display-results-with-gnuplot" title="Link to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gnuplot&gt;<span class="w"> </span>plot<span class="w"> </span><span class="s2">&quot;res-fft.txt&quot;</span><span class="w"> </span>u<span class="w"> </span><span class="m">1</span>:10<span class="w"> </span>w<span class="w"> </span>l<span class="w"> </span>title<span class="w"> </span><span class="s2">&quot;fft&quot;</span>
gnuplot&gt;<span class="w"> </span>replot<span class="w"> </span><span class="s2">&quot;res-mfem-mgis.txt&quot;</span><span class="w"> </span>u<span class="w"> </span><span class="m">1</span>:2<span class="w"> </span>w<span class="w"> </span>l<span class="w"> </span>title<span class="w"> </span><span class="s2">&quot;mfem-mgis&quot;</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../user_guide/glossary.html" class="btn btn-neutral float-left" title="Glossary Of Parameters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../developer_guide/developer_guide.html" class="btn btn-neutral float-right" title="Developer guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2024, Thomas Helfer, Guillaume Latu, Raphaël Prat, Maxence Wangermez.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>